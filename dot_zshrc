mkdir -p $HOME/.local/bin
path+=($HOME/.local/bin)

if [ ! -d "$HOME/.zgen" ]; then
    git clone https://github.com/tarjoilija/zgen.git "${HOME}/.zgen"
fi
source "${HOME}/.zgen/zgen.zsh"

_zgen_omz() {
    local plugin=$1
    local plugin_or_theme=${2:-plugins}
    if ! zgen saved; then
        zgen oh-my-zsh $plugin_or_theme/$plugin
    fi
}

_zgen_load() {
    local plugin=$1
    if ! zgen saved; then
        zgen load $1
    fi
}

if ! zgen saved; then
    zgen oh-my-zsh
fi

for d in $HOME/.zshrc.d/*; do
    source $d
done

if ! zgen saved; then
    zgen save
fi

compinit -i
typeset -U path
typeset -U fpath

